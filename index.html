<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Public Restrooms — San Diego</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="layout">
    <div id="map" aria-label="Map of public restrooms in San Diego"></div>

    <aside id="panel" aria-label="Restroom survey panel">
      <!-- Mobile drawer handle -->
      <div class="drawerHeader" id="drawerHeader" aria-hidden="true">
        <div class="drawerHandle"></div>
      </div>

      <h2>Public Restrooms — San Diego</h2>

      <div class="hint">
        Use the map to contribute information on public restrooms in San Diego County.<br>
        • Click <strong>anywhere on the map</strong> to suggest a new restroom<br>
        • Click an <strong>existing restroom</strong> to suggest a change<br><br>
        All submissions are reviewed before appearing on the public map.
      </div>

      <div id="modeIndicator" class="mode new">
        Suggest a new restroom location
      </div>

      <form id="surveyForm">
        <input type="hidden" id="place_id" />
        <input type="hidden" id="action" value="new" />

        <details open>
          <summary>Basics</summary>

          <label>Date and time of audit <span aria-hidden="true">*</span>
            <input id="audit_datetime" type="datetime-local" required />
          </label>

          <label>Name of Restroom <span aria-hidden="true">*</span>
            <input id="restroom_name" placeholder="e.g., Balboa Park – near museum" required />
          </label>

          <label>Researcher Name <span aria-hidden="true">*</span>
            <input id="researcher_name" placeholder="Your name" required />
          </label>

          <label>Address / Nearby landmark
            <input id="address" placeholder="Street or nearby landmark" />
          </label>

          <div class="row2">
            <label>Latitude <span aria-hidden="true">*</span>
              <input id="latitude" inputmode="decimal" required />
            </label>
            <label>Longitude <span aria-hidden="true">*</span>
              <input id="longitude" inputmode="decimal" required />
            </label>
          </div>
        </details>

        <details>
          <summary>Access & finding it</summary>

          <label>Is the bathroom facility open when you visited it? <span aria-hidden="true">*</span>
            <select id="open_when_visited" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
          </label>

          <label>What are the hours? <span aria-hidden="true">*</span>
            <input id="advertised_hours" placeholder="e.g., 8am–6pm" required />
          </label>

          <label>Confirm how this bathroom is accessed <span aria-hidden="true">*</span></label>
          <div class="radioGroup" role="radiogroup" aria-label="Access method">
            <label><input type="radio" name="access_method" value="Accessed from outside the building" required /> Accessed from outside the building</label>
            <label><input type="radio" name="access_method" value="Accessed from inside the building" /> Accessed from inside the building</label>
            <label><input type="radio" name="access_method" value="Employee Access Only" /> Employee Access Only</label>
          </div>

          <label>Was this restroom facility easy to find/locate? <span aria-hidden="true">*</span></label>
          <div class="radioGroup" role="radiogroup" aria-label="Findability">
            <label><input type="radio" name="findability" value="Easily Visible" required /> Easily Visible</label>
            <label><input type="radio" name="findability" value="Somewhat visible" /> Somewhat visible</label>
            <label><input type="radio" name="findability" value="Somewhat hard to find" /> Somewhat hard to find</label>
            <label><input type="radio" name="findability" value="Very hard to find" /> Very hard to find</label>
          </div>
        </details>

        <details>
          <summary>Amenities & safety</summary>

          <label>Is there a gender neutral restroom available? <span aria-hidden="true">*</span>
            <select id="gender_neutral" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
          </label>

          <label>Are there menstrual products available? <span aria-hidden="true">*</span>
            <select id="menstrual_products" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
          </label>

          <label>Are there showers available? <span aria-hidden="true">*</span>
            <select id="showers_available" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
          </label>

          <label>Is there a water fountain or bottle refill station nearby? <span aria-hidden="true">*</span>
            <select id="water_refill_nearby" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
          </label>

          <label>Is there visible signage posted regarding where this restroom is located? <span aria-hidden="true">*</span>
            <select id="visible_signage" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
            <small>This includes signage at the restroom and along the approach where someone might be looking.</small>
          </label>

          <label>Are there security cameras? <span aria-hidden="true">*</span>
            <select id="security_cameras" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
          </label>

          <label>Is this bathroom ADA accessible? <span aria-hidden="true">*</span>
            <select id="ada_accessible" required>
              <option value="" selected>—</option>
              <option>Yes</option>
              <option>No</option>
              <option>Unknown</option>
            </select>
            <small>Optionally record door frame width, stall width, and distance to sink in notes below.</small>
          </label>
        </details>

        <details>
          <summary>Observations</summary>

          <label>Are there any other barriers to access to this facility not otherwise noted, based on your external assessment?
            <textarea id="access_barriers" rows="3" placeholder="Examples: security presence, need to ask for this facility to be unlocked, not physically accessible."></textarea>
          </label>

          <label>What are your overall impressions of this facility?
            <textarea id="overall_impressions" rows="3" placeholder="Cleanliness, odor, upkeep, notable features/obstacles, etc."></textarea>
          </label>

          <label>What is the appearance around the outside of this restroom? Are there people in/around the facility when you are there? What were those people doing?
            <textarea id="outside_context" rows="4" placeholder="Describe the surrounding area and activity level."></textarea>
          </label>

          <label>Additional notes
            <textarea id="notes" rows="4"></textarea>
          </label>
        </details>

        <button type="submit" id="submitBtn">Submit suggestion</button>
        <div id="status" aria-live="polite"></div>
      </form>
    </aside>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
